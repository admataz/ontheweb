!function(){var t,e,n;!function(r){function i(t,e){return _.call(t,e)}function a(t,e){var n,r,i,a,u,s,o,c,l,f,h,p=e&&e.split("/"),d=y.map,g=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(p=p.slice(0,p.length-1),t=t.split("/"),u=t.length-1,y.nodeIdCompat&&x.test(t[u])&&(t[u]=t[u].replace(x,"")),t=p.concat(t),l=0;l<t.length;l+=1)if(h=t[l],"."===h)t.splice(l,1),l-=1;else if(".."===h){if(1===l&&(".."===t[2]||".."===t[0]))break;l>0&&(t.splice(l-1,2),l-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||g)&&d){for(n=t.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),p)for(f=p.length;f>0;f-=1)if(i=d[p.slice(0,f).join("/")],i&&(i=i[r])){a=i,s=l;break}if(a)break;!o&&g&&g[r]&&(o=g[r],c=l)}!a&&o&&(a=o,s=c),a&&(n.splice(0,s,a),t=n.join("/"))}return t}function u(t,e){return function(){return p.apply(r,w.call(arguments,0).concat([t,e]))}}function s(t){return function(e){return a(e,t)}}function o(t){return function(e){v[t]=e}}function c(t){if(i(m,t)){var e=m[t];delete m[t],b[t]=!0,h.apply(r,e)}if(!i(v,t)&&!i(b,t))throw new Error("No "+t);return v[t]}function l(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function f(t){return function(){return y&&y.config&&y.config[t]||{}}}var h,p,d,g,v={},m={},y={},b={},_=Object.prototype.hasOwnProperty,w=[].slice,x=/\.js$/;d=function(t,e){var n,r=l(t),i=r[0];return t=r[1],i&&(i=a(i,e),n=c(i)),i?t=n&&n.normalize?n.normalize(t,s(e)):a(t,e):(t=a(t,e),r=l(t),i=r[0],t=r[1],i&&(n=c(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:n}},g={require:function(t){return u(t)},exports:function(t){var e=v[t];return"undefined"!=typeof e?e:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:f(t)}}},h=function(t,e,n,a){var s,l,f,h,p,y,_=[],w=typeof n;if(a=a||t,"undefined"===w||"function"===w){for(e=!e.length&&n.length?["require","exports","module"]:e,p=0;p<e.length;p+=1)if(h=d(e[p],a),l=h.f,"require"===l)_[p]=g.require(t);else if("exports"===l)_[p]=g.exports(t),y=!0;else if("module"===l)s=_[p]=g.module(t);else if(i(v,l)||i(m,l)||i(b,l))_[p]=c(l);else{if(!h.p)throw new Error(t+" missing "+l);h.p.load(h.n,u(a,!0),o(l),{}),_[p]=v[l]}f=n?n.apply(v[t],_):void 0,t&&(s&&s.exports!==r&&s.exports!==v[t]?v[t]=s.exports:f===r&&y||(v[t]=f))}else t&&(v[t]=n)},t=e=p=function(t,e,n,i,a){if("string"==typeof t)return g[t]?g[t](e):c(d(t,e).f);if(!t.splice){if(y=t,y.deps&&p(y.deps,y.callback),!e)return;e.splice?(t=e,e=n,n=null):t=r}return e=e||function(){},"function"==typeof n&&(n=i,i=a),i?h(r,t,e,n):setTimeout(function(){h(r,t,e,n)},4),p},p.config=function(t){return p(t)},t._defined=v,n=function(t,e,n){e.splice||(n=e,e=[]),i(v,t)||i(m,t)||(m[t]=[t,e,n])},n.amd={jQuery:!0}}(),n("lib/almond/almond",function(){}),function(){function t(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;++r<i;)if(t[r]===e)return r;return-1}function e(e,n){var r=typeof n;if(e=e.cache,"boolean"==r||null==n)return e[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?n:y+n;return e=(e=e[r])&&e[i],"object"==r?e&&t(e,n)>-1?0:-1:e?0:-1}function r(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?t:y+t,i=e[n]||(e[n]={});"object"==n?(i[r]||(i[r]=[])).push(t):i[r]=!0}}function i(t){return t.charCodeAt(0)}function a(t,e){for(var n=t.criteria,r=e.criteria,i=-1,a=n.length;++i<a;){var u=n[i],s=r[i];if(u!==s){if(u>s||"undefined"==typeof u)return 1;if(s>u||"undefined"==typeof s)return-1}}return t.index-e.index}function u(t){var e=-1,n=t.length,i=t[0],a=t[n/2|0],u=t[n-1];if(i&&"object"==typeof i&&a&&"object"==typeof a&&u&&"object"==typeof u)return!1;var s=c();s["false"]=s["null"]=s["true"]=s.undefined=!1;var o=c();for(o.array=t,o.cache=s,o.push=r;++e<n;)o.push(t[e]);return o}function s(t){return"\\"+Y[t]}function o(){return g.pop()||[]}function c(){return v.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(t){t.length=0,g.length<_&&g.push(t)}function f(t){var e=t.cache;e&&f(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,v.length<_&&v.push(t)}function h(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,a=Array(0>i?0:i);++r<i;)a[r]=t[e+r];return a}function p(n){function r(t){return t&&"object"==typeof t&&!Qr(t)&&zr.call(t,"__wrapped__")?t:new g(t)}function g(t,e){this.__chain__=!!e,this.__wrapped__=t}function v(t){function e(){if(r){var t=h(r);Fr.apply(t,arguments)}if(this instanceof e){var a=Y(n.prototype),u=n.apply(a,t||arguments);return Ee(u)?u:a}return n.apply(i,t||arguments)}var n=t[0],r=t[2],i=t[4];return Kr(e,t),e}function _(t,e,n,r,i){if(n){var a=n(t);if("undefined"!=typeof a)return a}var u=Ee(t);if(!u)return t;var s=Cr.call(t);if(!q[s])return t;var c=Vr[s];switch(s){case H:case D:return new c(+t);case R:case J:return new c(t);case U:return a=c(t.source,S.exec(t)),a.lastIndex=t.lastIndex,a}var f=Qr(t);if(e){var p=!r;r||(r=o()),i||(i=o());for(var d=r.length;d--;)if(r[d]==t)return i[d];a=f?c(t.length):{}}else a=f?h(t):ai({},t);return f&&(zr.call(t,"index")&&(a.index=t.index),zr.call(t,"input")&&(a.input=t.input)),e?(r.push(t),i.push(a),(f?Xe:oi)(t,function(t,u){a[u]=_(t,e,n,r,i)}),p&&(l(r),l(i)),a):a}function Y(t){return Ee(t)?Rr(t):{}}function X(t,e,n){if("function"!=typeof t)return Qn;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(Xr.funcNames&&(r=!t.name),r=r||!Xr.funcDecomp,!r)){var i=Ir.call(t);Xr.funcNames||(r=!C.test(i)),r||(r=N.test(i),Kr(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,a){return t.call(e,n,r,i,a)}}return Fn(t,e)}function K(t){function e(){var t=o?u:this;if(i){var d=h(i);Fr.apply(d,arguments)}if((a||l)&&(d||(d=h(arguments)),a&&Fr.apply(d,a),l&&d.length<s))return r|=16,K([n,f?r:-4&r,d,null,u,s]);if(d||(d=arguments),c&&(n=t[p]),this instanceof e){t=Y(n.prototype);var g=n.apply(t,d);return Ee(g)?g:t}return n.apply(t,d)}var n=t[0],r=t[1],i=t[2],a=t[3],u=t[4],s=t[5],o=1&r,c=2&r,l=4&r,f=8&r,p=n;return Kr(e,t),e}function Q(n,r){var i=-1,a=oe(),s=n?n.length:0,o=s>=b&&a===t,c=[];if(o){var l=u(r);l?(a=e,r=l):o=!1}for(;++i<s;){var h=n[i];a(r,h)<0&&c.push(h)}return o&&f(r),c}function Z(t,e,n,r){for(var i=(r||0)-1,a=t?t.length:0,u=[];++i<a;){var s=t[i];if(s&&"object"==typeof s&&"number"==typeof s.length&&(Qr(s)||he(s))){e||(s=Z(s,e,n));var o=-1,c=s.length,l=u.length;for(u.length+=c;++o<c;)u[l++]=s[o]}else n||u.push(s)}return u}function ee(t,e,n,r,i,a){if(n){var u=n(t,e);if("undefined"!=typeof u)return!!u}if(t===e)return 0!==t||1/t==1/e;var s=typeof t,c=typeof e;if(!(t!==t||t&&W[s]||e&&W[c]))return!1;if(null==t||null==e)return t===e;var f=Cr.call(t),h=Cr.call(e);if(f==F&&(f=B),h==F&&(h=B),f!=h)return!1;switch(f){case H:case D:return+t==+e;case R:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case U:case J:return t==xr(e)}var p=f==$;if(!p){var d=zr.call(t,"__wrapped__"),g=zr.call(e,"__wrapped__");if(d||g)return ee(d?t.__wrapped__:t,g?e.__wrapped__:e,n,r,i,a);if(f!=B)return!1;var v=t.constructor,m=e.constructor;if(v!=m&&!(Ae(v)&&v instanceof v&&Ae(m)&&m instanceof m)&&"constructor"in t&&"constructor"in e)return!1}var y=!i;i||(i=o()),a||(a=o());for(var b=i.length;b--;)if(i[b]==t)return a[b]==e;var _=0;if(u=!0,i.push(t),a.push(e),p){if(b=t.length,_=e.length,u=_==b,u||r)for(;_--;){var w=b,x=e[_];if(r)for(;w--&&!(u=ee(t[w],x,n,r,i,a)););else if(!(u=ee(t[_],x,n,r,i,a)))break}}else si(e,function(e,s,o){return zr.call(o,s)?(_++,u=zr.call(t,s)&&ee(t[s],e,n,r,i,a)):void 0}),u&&!r&&si(t,function(t,e,n){return zr.call(n,e)?u=--_>-1:void 0});return i.pop(),a.pop(),y&&(l(i),l(a)),u}function ne(t,e,n,r,i){(Qr(e)?Xe:oi)(e,function(e,a){var u,s,o=e,c=t[a];if(e&&((s=Qr(e))||ci(e))){for(var l=r.length;l--;)if(u=r[l]==e){c=i[l];break}if(!u){var f;n&&(o=n(c,e),(f="undefined"!=typeof o)&&(c=o)),f||(c=s?Qr(c)?c:[]:ci(c)?c:{}),r.push(e),i.push(c),f||ne(c,e,n,r,i)}}else n&&(o=n(c,e),"undefined"==typeof o&&(o=e)),"undefined"!=typeof o&&(c=o);t[a]=c})}function re(t,e){return t+Nr(Yr()*(e-t+1))}function ie(n,r,i){var a=-1,s=oe(),c=n?n.length:0,h=[],p=!r&&c>=b&&s===t,d=i||p?o():h;if(p){var g=u(d);s=e,d=g}for(;++a<c;){var v=n[a],m=i?i(v,a,n):v;(r?!a||d[d.length-1]!==m:s(d,m)<0)&&((i||p)&&d.push(m),h.push(v))}return p?(l(d.array),f(d)):i&&l(d),h}function ae(t){return function(e,n,i){var a={};n=r.createCallback(n,i,3);var u=-1,s=e?e.length:0;if("number"==typeof s)for(;++u<s;){var o=e[u];t(a,o,n(o,u,e),e)}else oi(e,function(e,r,i){t(a,e,n(e,r,i),i)});return a}}function ue(t,e,n,r,i,a){var u=1&e,s=2&e,o=4&e,c=16&e,l=32&e;if(!s&&!Ae(t))throw new kr;c&&!n.length&&(e&=-17,c=n=!1),l&&!r.length&&(e&=-33,l=r=!1);var f=t&&t.__bindData__;if(f&&f!==!0)return f=h(f),f[2]&&(f[2]=h(f[2])),f[3]&&(f[3]=h(f[3])),!u||1&f[1]||(f[4]=i),!u&&1&f[1]&&(e|=8),!o||4&f[1]||(f[5]=a),c&&Fr.apply(f[2]||(f[2]=[]),n),l&&Dr.apply(f[3]||(f[3]=[]),r),f[1]|=e,ue.apply(null,f);var p=1==e||17===e?v:K;return p([t,e,n,r,i,a])}function se(t){return ei[t]}function oe(){var e=(e=r.indexOf)===yn?t:e;return e}function ce(t){return"function"==typeof t&&Or.test(t)}function le(t){var e,n;return t&&Cr.call(t)==B&&(e=t.constructor,!Ae(e)||e instanceof e)?(si(t,function(t,e){n=e}),"undefined"==typeof n||zr.call(t,n)):!1}function fe(t){return ni[t]}function he(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Cr.call(t)==F||!1}function pe(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1),_(t,e,"function"==typeof n&&X(n,r,1))}function de(t,e,n){return _(t,!0,"function"==typeof e&&X(e,n,1))}function ge(t,e){var n=Y(t);return e?ai(n,e):n}function ve(t,e,n){var i;return e=r.createCallback(e,n,3),oi(t,function(t,n,r){return e(t,n,r)?(i=n,!1):void 0}),i}function me(t,e,n){var i;return e=r.createCallback(e,n,3),be(t,function(t,n,r){return e(t,n,r)?(i=n,!1):void 0}),i}function ye(t,e,n){var r=[];si(t,function(t,e){r.push(e,t)});var i=r.length;for(e=X(e,n,3);i--&&e(r[i--],r[i],t)!==!1;);return t}function be(t,e,n){var r=ti(t),i=r.length;for(e=X(e,n,3);i--;){var a=r[i];if(e(t[a],a,t)===!1)break}return t}function _e(t){var e=[];return si(t,function(t,n){Ae(t)&&e.push(n)}),e.sort()}function we(t,e){return t?zr.call(t,e):!1}function xe(t){for(var e=-1,n=ti(t),r=n.length,i={};++e<r;){var a=n[e];i[t[a]]=a}return i}function ke(t){return t===!0||t===!1||t&&"object"==typeof t&&Cr.call(t)==H||!1}function Me(t){return t&&"object"==typeof t&&Cr.call(t)==D||!1}function je(t){return t&&1===t.nodeType||!1}function Se(t){var e=!0;if(!t)return e;var n=Cr.call(t),r=t.length;return n==$||n==J||n==F||n==B&&"number"==typeof r&&Ae(t.splice)?!r:(oi(t,function(){return e=!1}),e)}function Ce(t,e,n,r){return ee(t,e,"function"==typeof n&&X(n,r,2))}function Oe(t){return Ur(t)&&!Jr(parseFloat(t))}function Ae(t){return"function"==typeof t}function Ee(t){return!(!t||!W[typeof t])}function Ne(t){return Te(t)&&t!=+t}function Ie(t){return null===t}function Te(t){return"number"==typeof t||t&&"object"==typeof t&&Cr.call(t)==R||!1}function ze(t){return t&&"object"==typeof t&&Cr.call(t)==U||!1}function Fe(t){return"string"==typeof t||t&&"object"==typeof t&&Cr.call(t)==J||!1}function $e(t){return"undefined"==typeof t}function He(t,e,n){var i={};return e=r.createCallback(e,n,3),oi(t,function(t,n,r){i[n]=e(t,n,r)}),i}function De(t){var e=arguments,n=2;if(!Ee(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var r=X(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(r=e[--n]);for(var i=h(arguments,1,n),a=-1,u=o(),s=o();++a<n;)ne(t,i[a],r,u,s);return l(u),l(s),t}function Pe(t,e,n){var i={};if("function"!=typeof e){var a=[];si(t,function(t,e){a.push(e)}),a=Q(a,Z(arguments,!0,!1,1));for(var u=-1,s=a.length;++u<s;){var o=a[u];i[o]=t[o]}}else e=r.createCallback(e,n,3),si(t,function(t,n,r){e(t,n,r)||(i[n]=t)});return i}function Re(t){for(var e=-1,n=ti(t),r=n.length,i=dr(r);++e<r;){var a=n[e];i[e]=[a,t[a]]}return i}function Be(t,e,n){var i={};if("function"!=typeof e)for(var a=-1,u=Z(arguments,!0,!1,1),s=Ee(t)?u.length:0;++a<s;){var o=u[a];o in t&&(i[o]=t[o])}else e=r.createCallback(e,n,3),si(t,function(t,n,r){e(t,n,r)&&(i[n]=t)});return i}function Ue(t,e,n,i){var a=Qr(t);if(null==n)if(a)n=[];else{var u=t&&t.constructor,s=u&&u.prototype;n=Y(s)}return e&&(e=r.createCallback(e,i,4),(a?Xe:oi)(t,function(t,r,i){return e(n,t,r,i)})),n}function Je(t){for(var e=-1,n=ti(t),r=n.length,i=dr(r);++e<r;)i[e]=t[n[e]];return i}function qe(t){for(var e=arguments,n=-1,r=Z(e,!0,!1,1),i=e[2]&&e[2][e[1]]===t?1:r.length,a=dr(i);++n<i;)a[n]=t[r[n]];return a}function Le(t,e,n){var r=-1,i=oe(),a=t?t.length:0,u=!1;return n=(0>n?Lr(0,a+n):n)||0,Qr(t)?u=i(t,e,n)>-1:"number"==typeof a?u=(Fe(t)?t.indexOf(e,n):i(t,e,n))>-1:oi(t,function(t){return++r>=n?!(u=t===e):void 0}),u}function Ge(t,e,n){var i=!0;e=r.createCallback(e,n,3);var a=-1,u=t?t.length:0;if("number"==typeof u)for(;++a<u&&(i=!!e(t[a],a,t)););else oi(t,function(t,n,r){return i=!!e(t,n,r)});return i}function We(t,e,n){var i=[];e=r.createCallback(e,n,3);var a=-1,u=t?t.length:0;if("number"==typeof u)for(;++a<u;){var s=t[a];e(s,a,t)&&i.push(s)}else oi(t,function(t,n,r){e(t,n,r)&&i.push(t)});return i}function Ye(t,e,n){e=r.createCallback(e,n,3);var i=-1,a=t?t.length:0;if("number"!=typeof a){var u;return oi(t,function(t,n,r){return e(t,n,r)?(u=t,!1):void 0}),u}for(;++i<a;){var s=t[i];if(e(s,i,t))return s}}function Ve(t,e,n){var i;return e=r.createCallback(e,n,3),Ke(t,function(t,n,r){return e(t,n,r)?(i=t,!1):void 0}),i}function Xe(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&"undefined"==typeof n?e:X(e,n,3),"number"==typeof i)for(;++r<i&&e(t[r],r,t)!==!1;);else oi(t,e);return t}function Ke(t,e,n){var r=t?t.length:0;if(e=e&&"undefined"==typeof n?e:X(e,n,3),"number"==typeof r)for(;r--&&e(t[r],r,t)!==!1;);else{var i=ti(t);r=i.length,oi(t,function(t,n,a){return n=i?i[--r]:--r,e(a[n],n,a)})}return t}function Qe(t,e){var n=h(arguments,2),r=-1,i="function"==typeof e,a=t?t.length:0,u=dr("number"==typeof a?a:0);return Xe(t,function(t){u[++r]=(i?e:t[e]).apply(t,n)}),u}function Ze(t,e,n){var i=-1,a=t?t.length:0;if(e=r.createCallback(e,n,3),"number"==typeof a)for(var u=dr(a);++i<a;)u[i]=e(t[i],i,t);else u=[],oi(t,function(t,n,r){u[++i]=e(t,n,r)});return u}function tn(t,e,n){var a=-1/0,u=a;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&Qr(t))for(var s=-1,o=t.length;++s<o;){var c=t[s];c>u&&(u=c)}else e=null==e&&Fe(t)?i:r.createCallback(e,n,3),Xe(t,function(t,n,r){var i=e(t,n,r);i>a&&(a=i,u=t)});return u}function en(t,e,n){var a=1/0,u=a;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&Qr(t))for(var s=-1,o=t.length;++s<o;){var c=t[s];u>c&&(u=c)}else e=null==e&&Fe(t)?i:r.createCallback(e,n,3),Xe(t,function(t,n,r){var i=e(t,n,r);a>i&&(a=i,u=t)});return u}function nn(t,e,n,i){if(!t)return n;var a=arguments.length<3;e=r.createCallback(e,i,4);var u=-1,s=t.length;if("number"==typeof s)for(a&&(n=t[++u]);++u<s;)n=e(n,t[u],u,t);else oi(t,function(t,r,i){n=a?(a=!1,t):e(n,t,r,i)});return n}function rn(t,e,n,i){var a=arguments.length<3;return e=r.createCallback(e,i,4),Ke(t,function(t,r,i){n=a?(a=!1,t):e(n,t,r,i)}),n}function an(t,e,n){return e=r.createCallback(e,n,3),We(t,function(t,n,r){return!e(t,n,r)})}function un(t,e,n){if(t&&"number"!=typeof t.length&&(t=Je(t)),null==e||n)return t?t[re(0,t.length-1)]:d;var r=sn(t);return r.length=Gr(Lr(0,e),r.length),r}function sn(t){var e=-1,n=t?t.length:0,r=dr("number"==typeof n?n:0);return Xe(t,function(t){var n=re(0,++e);r[e]=r[n],r[n]=t}),r}function on(t){var e=t?t.length:0;return"number"==typeof e?e:ti(t).length}function cn(t,e,n){var i;e=r.createCallback(e,n,3);var a=-1,u=t?t.length:0;if("number"==typeof u)for(;++a<u&&!(i=e(t[a],a,t)););else oi(t,function(t,n,r){return!(i=e(t,n,r))});return!!i}function ln(t,e,n){var i=-1,u=Qr(e),s=t?t.length:0,h=dr("number"==typeof s?s:0);for(u||(e=r.createCallback(e,n,3)),Xe(t,function(t,n,r){var a=h[++i]=c();u?a.criteria=Ze(e,function(e){return t[e]}):(a.criteria=o())[0]=e(t,n,r),a.index=i,a.value=t}),s=h.length,h.sort(a);s--;){var p=h[s];h[s]=p.value,u||l(p.criteria),f(p)}return h}function fn(t){return t&&"number"==typeof t.length?h(t):Je(t)}function hn(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}function pn(t){return Q(t,Z(arguments,!0,!0,1))}function dn(t,e,n){var i=-1,a=t?t.length:0;for(e=r.createCallback(e,n,3);++i<a;)if(e(t[i],i,t))return i;return-1}function gn(t,e,n){var i=t?t.length:0;for(e=r.createCallback(e,n,3);i--;)if(e(t[i],i,t))return i;return-1}function vn(t,e,n){var i=0,a=t?t.length:0;if("number"!=typeof e&&null!=e){var u=-1;for(e=r.createCallback(e,n,3);++u<a&&e(t[u],u,t);)i++}else if(i=e,null==i||n)return t?t[0]:d;return h(t,0,Gr(Lr(0,i),a))}function mn(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(t=Ze(t,n,r)),Z(t,e)}function yn(e,n,r){if("number"==typeof r){var i=e?e.length:0;r=0>r?Lr(0,i+r):r||0}else if(r){var a=Cn(e,n);return e[a]===n?a:-1}return t(e,n,r)}function bn(t,e,n){var i=0,a=t?t.length:0;if("number"!=typeof e&&null!=e){var u=a;for(e=r.createCallback(e,n,3);u--&&e(t[u],u,t);)i++}else i=null==e||n?1:e||i;return h(t,0,Gr(Lr(0,a-i),a))}function _n(){for(var n=[],r=-1,i=arguments.length,a=o(),s=oe(),c=s===t,h=o();++r<i;){var p=arguments[r];(Qr(p)||he(p))&&(n.push(p),a.push(c&&p.length>=b&&u(r?n[r]:h)))}var d=n[0],g=-1,v=d?d.length:0,m=[];t:for(;++g<v;){var y=a[0];if(p=d[g],(y?e(y,p):s(h,p))<0){for(r=i,(y||h).push(p);--r;)if(y=a[r],(y?e(y,p):s(n[r],p))<0)continue t;m.push(p)}}for(;i--;)y=a[i],y&&f(y);return l(a),l(h),m}function wn(t,e,n){var i=0,a=t?t.length:0;if("number"!=typeof e&&null!=e){var u=a;for(e=r.createCallback(e,n,3);u--&&e(t[u],u,t);)i++}else if(i=e,null==i||n)return t?t[a-1]:d;return h(t,Lr(0,a-i))}function xn(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(0>n?Lr(0,r+n):Gr(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function kn(t){for(var e=arguments,n=0,r=e.length,i=t?t.length:0;++n<r;)for(var a=-1,u=e[n];++a<i;)t[a]===u&&(Hr.call(t,a--,1),i--);return t}function Mn(t,e,n){t=+t||0,n="number"==typeof n?n:+n||1,null==e&&(e=t,t=0);for(var r=-1,i=Lr(0,Ar((e-t)/(n||1))),a=dr(i);++r<i;)a[r]=t,t+=n;return a}function jn(t,e,n){var i=-1,a=t?t.length:0,u=[];for(e=r.createCallback(e,n,3);++i<a;){var s=t[i];e(s,i,t)&&(u.push(s),Hr.call(t,i--,1),a--)}return u}function Sn(t,e,n){if("number"!=typeof e&&null!=e){var i=0,a=-1,u=t?t.length:0;for(e=r.createCallback(e,n,3);++a<u&&e(t[a],a,t);)i++}else i=null==e||n?1:Lr(0,e);return h(t,i)}function Cn(t,e,n,i){var a=0,u=t?t.length:a;for(n=n?r.createCallback(n,i,1):Qn,e=n(e);u>a;){var s=a+u>>>1;n(t[s])<e?a=s+1:u=s}return a}function On(){return ie(Z(arguments,!0,!0))}function An(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n="function"!=typeof e&&i&&i[e]===t?null:e,e=!1),null!=n&&(n=r.createCallback(n,i,3)),ie(t,e,n)}function En(t){return Q(t,h(arguments,1))}function Nn(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Qr(n)||he(n))var r=r?ie(Q(r,n).concat(Q(n,r))):n}return r||[]}function In(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,n=t?tn(pi(t,"length")):0,r=dr(0>n?0:n);++e<n;)r[e]=pi(t,e);return r}function Tn(t,e){var n=-1,r=t?t.length:0,i={};for(e||!r||Qr(t[0])||(e=[]);++n<r;){var a=t[n];e?i[a]=e[n]:a&&(i[a[0]]=a[1])}return i}function zn(t,e){if(!Ae(e))throw new kr;return function(){return--t<1?e.apply(this,arguments):void 0}}function Fn(t,e){return arguments.length>2?ue(t,17,h(arguments,2),null,e):ue(t,1,null,null,e)}function $n(t){for(var e=arguments.length>1?Z(arguments,!0,!1,1):_e(t),n=-1,r=e.length;++n<r;){var i=e[n];t[i]=ue(t[i],1,null,null,t)}return t}function Hn(t,e){return arguments.length>2?ue(e,19,h(arguments,2),null,t):ue(e,3,null,null,t)}function Dn(){for(var t=arguments,e=t.length;e--;)if(!Ae(t[e]))throw new kr;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Pn(t,e){return e="number"==typeof e?e:+e||t.length,ue(t,4,null,null,null,e)}function Rn(t,e,n){var r,i,a,u,s,o,c,l=0,f=!1,h=!0;if(!Ae(t))throw new kr;if(e=Lr(0,e)||0,n===!0){var p=!0;h=!1}else Ee(n)&&(p=n.leading,f="maxWait"in n&&(Lr(e,n.maxWait)||0),h="trailing"in n?n.trailing:h);var g=function(){var n=e-(gi()-u);if(0>=n){i&&Er(i);var f=c;i=o=c=d,f&&(l=gi(),a=t.apply(s,r),o||i||(r=s=null))}else o=$r(g,n)},v=function(){o&&Er(o),i=o=c=d,(h||f!==e)&&(l=gi(),a=t.apply(s,r),o||i||(r=s=null))};return function(){if(r=arguments,u=gi(),s=this,c=h&&(o||!p),f===!1)var n=p&&!o;else{i||p||(l=u);var d=f-(u-l),m=0>=d;m?(i&&(i=Er(i)),l=u,a=t.apply(s,r)):i||(i=$r(v,d))}return m&&o?o=Er(o):o||e===f||(o=$r(g,e)),n&&(m=!0,a=t.apply(s,r)),!m||o||i||(r=s=null),a}}function Bn(t){if(!Ae(t))throw new kr;var e=h(arguments,1);return $r(function(){t.apply(d,e)},1)}function Un(t,e){if(!Ae(t))throw new kr;var n=h(arguments,2);return $r(function(){t.apply(d,n)},e)}function Jn(t,e){if(!Ae(t))throw new kr;var n=function(){var r=n.cache,i=e?e.apply(this,arguments):y+arguments[0];return zr.call(r,i)?r[i]:r[i]=t.apply(this,arguments)};return n.cache={},n}function qn(t){var e,n;if(!Ae(t))throw new kr;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Ln(t){return ue(t,16,h(arguments,1))}function Gn(t){return ue(t,32,null,h(arguments,1))}function Wn(t,e,n){var r=!0,i=!0;if(!Ae(t))throw new kr;return n===!1?r=!1:Ee(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),L.leading=r,L.maxWait=e,L.trailing=i,Rn(t,e,L)}function Yn(t,e){return ue(e,16,[t])}function Vn(t){return function(){return t}}function Xn(t,e,n){var r=typeof t;if(null==t||"function"==r)return X(t,e,n);if("object"!=r)return nr(t);var i=ti(t),a=i[0],u=t[a];return 1!=i.length||u!==u||Ee(u)?function(e){for(var n=i.length,r=!1;n--&&(r=ee(e[i[n]],t[i[n]],null,!0)););return r}:function(t){var e=t[a];return u===e&&(0!==u||1/u==1/e)}}function Kn(t){return null==t?"":xr(t).replace(ii,se)}function Qn(t){return t}function Zn(t,e,n){var i=!0,a=e&&_e(e);e&&(n||a.length)||(null==n&&(n=e),u=g,e=t,t=r,a=_e(e)),n===!1?i=!1:Ee(n)&&"chain"in n&&(i=n.chain);var u=t,s=Ae(u);Xe(a,function(n){var r=t[n]=e[n];s&&(u.prototype[n]=function(){var e=this.__chain__,n=this.__wrapped__,a=[n];Fr.apply(a,arguments);var s=r.apply(t,a);if(i||e){if(n===s&&Ee(s))return this;s=new u(s),s.__chain__=e}return s})})}function tr(){return n._=Sr,this}function er(){}function nr(t){return function(e){return e[t]}}function rr(t,e,n){var r=null==t,i=null==e;if(null==n&&("boolean"==typeof t&&i?(n=t,t=1):i||"boolean"!=typeof e||(n=e,i=!0)),r&&i&&(e=1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var a=Yr();return Gr(t+a*(e-t+parseFloat("1e-"+((a+"").length-1))),e)}return re(t,e)}function ir(t,e){if(t){var n=t[e];return Ae(n)?t[e]():n}}function ar(t,e,n){var i=r.templateSettings;t=xr(t||""),n=ui({},n,i);var a,u=ui({},n.imports,i.imports),o=ti(u),c=Je(u),l=0,f=n.interpolate||E,h="__p += '",p=wr((n.escape||E).source+"|"+f.source+"|"+(f===O?j:E).source+"|"+(n.evaluate||E).source+"|$","g");t.replace(p,function(e,n,r,i,u,o){return r||(r=i),h+=t.slice(l,o).replace(I,s),n&&(h+="' +\n__e("+n+") +\n'"),u&&(a=!0,h+="';\n"+u+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=o+e.length,e}),h+="';\n";var g=n.variable,v=g;v||(g="obj",h="with ("+g+") {\n"+h+"\n}\n"),h=(a?h.replace(x,""):h).replace(k,"$1").replace(M,"$1;"),h="function("+g+") {\n"+(v?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+z++ +"]")+"\n*/";try{var y=mr(o,"return "+h+m).apply(d,c)}catch(b){throw b.source=h,b}return e?y(e):(y.source=h,y)}function ur(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=dr(t);for(e=X(e,n,1);++r<t;)i[r]=e(r);return i}function sr(t){return null==t?"":xr(t).replace(ri,fe)}function or(t){var e=++m;return xr(null==t?"":t)+e}function cr(t){return t=new g(t),t.__chain__=!0,t}function lr(t,e){return e(t),t}function fr(){return this.__chain__=!0,this}function hr(){return xr(this.__wrapped__)}function pr(){return this.__wrapped__}n=n?te.defaults(V.Object(),n,te.pick(V,T)):V;var dr=n.Array,gr=n.Boolean,vr=n.Date,mr=n.Function,yr=n.Math,br=n.Number,_r=n.Object,wr=n.RegExp,xr=n.String,kr=n.TypeError,Mr=[],jr=_r.prototype,Sr=n._,Cr=jr.toString,Or=wr("^"+xr(Cr).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Ar=yr.ceil,Er=n.clearTimeout,Nr=yr.floor,Ir=mr.prototype.toString,Tr=ce(Tr=_r.getPrototypeOf)&&Tr,zr=jr.hasOwnProperty,Fr=Mr.push,$r=n.setTimeout,Hr=Mr.splice,Dr=Mr.unshift,Pr=function(){try{var t={},e=ce(e=_r.defineProperty)&&e,n=e(t,t,t)&&e}catch(r){}return n}(),Rr=ce(Rr=_r.create)&&Rr,Br=ce(Br=dr.isArray)&&Br,Ur=n.isFinite,Jr=n.isNaN,qr=ce(qr=_r.keys)&&qr,Lr=yr.max,Gr=yr.min,Wr=n.parseInt,Yr=yr.random,Vr={};Vr[$]=dr,Vr[H]=gr,Vr[D]=vr,Vr[P]=mr,Vr[B]=_r,Vr[R]=br,Vr[U]=wr,Vr[J]=xr,g.prototype=r.prototype;var Xr=r.support={};Xr.funcDecomp=!ce(n.WinRTError)&&N.test(p),Xr.funcNames="string"==typeof mr.name,r.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:O,variable:"",imports:{_:r}},Rr||(Y=function(){function t(){}return function(e){if(Ee(e)){t.prototype=e;var r=new t;t.prototype=null}return r||n.Object()}}());var Kr=Pr?function(t,e){G.value=e,Pr(t,"__bindData__",G)}:er,Qr=Br||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Cr.call(t)==$||!1},Zr=function(t){var e,n=t,r=[];if(!n)return r;if(!W[typeof t])return r;for(e in n)zr.call(n,e)&&r.push(e);return r},ti=qr?function(t){return Ee(t)?qr(t):[]}:Zr,ei={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ni=xe(ei),ri=wr("("+ti(ni).join("|")+")","g"),ii=wr("["+ti(ei).join("")+"]","g"),ai=function(t,e,n){var r,i=t,a=i;if(!i)return a;var u=arguments,s=0,o="number"==typeof n?2:u.length;if(o>3&&"function"==typeof u[o-2])var c=X(u[--o-1],u[o--],2);else o>2&&"function"==typeof u[o-1]&&(c=u[--o]);for(;++s<o;)if(i=u[s],i&&W[typeof i])for(var l=-1,f=W[typeof i]&&ti(i),h=f?f.length:0;++l<h;)r=f[l],a[r]=c?c(a[r],i[r]):i[r];return a},ui=function(t,e,n){var r,i=t,a=i;if(!i)return a;for(var u=arguments,s=0,o="number"==typeof n?2:u.length;++s<o;)if(i=u[s],i&&W[typeof i])for(var c=-1,l=W[typeof i]&&ti(i),f=l?l.length:0;++c<f;)r=l[c],"undefined"==typeof a[r]&&(a[r]=i[r]);return a},si=function(t,e,n){var r,i=t,a=i;if(!i)return a;if(!W[typeof i])return a;e=e&&"undefined"==typeof n?e:X(e,n,3);for(r in i)if(e(i[r],r,t)===!1)return a;return a},oi=function(t,e,n){var r,i=t,a=i;if(!i)return a;if(!W[typeof i])return a;e=e&&"undefined"==typeof n?e:X(e,n,3);for(var u=-1,s=W[typeof i]&&ti(i),o=s?s.length:0;++u<o;)if(r=s[u],e(i[r],r,t)===!1)return a;return a},ci=Tr?function(t){if(!t||Cr.call(t)!=B)return!1;var e=t.valueOf,n=ce(e)&&(n=Tr(e))&&Tr(n);return n?t==n||Tr(t)==n:le(t)}:le,li=ae(function(t,e,n){zr.call(t,n)?t[n]++:t[n]=1}),fi=ae(function(t,e,n){(zr.call(t,n)?t[n]:t[n]=[]).push(e)}),hi=ae(function(t,e,n){t[n]=e}),pi=Ze,di=We,gi=ce(gi=vr.now)&&gi||function(){return(new vr).getTime()},vi=8==Wr(w+"08")?Wr:function(t,e){return Wr(Fe(t)?t.replace(A,""):t,e||0)};return r.after=zn,r.assign=ai,r.at=qe,r.bind=Fn,r.bindAll=$n,r.bindKey=Hn,r.chain=cr,r.compact=hn,r.compose=Dn,r.constant=Vn,r.countBy=li,r.create=ge,r.createCallback=Xn,r.curry=Pn,r.debounce=Rn,r.defaults=ui,r.defer=Bn,r.delay=Un,r.difference=pn,r.filter=We,r.flatten=mn,r.forEach=Xe,r.forEachRight=Ke,r.forIn=si,r.forInRight=ye,r.forOwn=oi,r.forOwnRight=be,r.functions=_e,r.groupBy=fi,r.indexBy=hi,r.initial=bn,r.intersection=_n,r.invert=xe,r.invoke=Qe,r.keys=ti,r.map=Ze,r.mapValues=He,r.max=tn,r.memoize=Jn,r.merge=De,r.min=en,r.omit=Pe,r.once=qn,r.pairs=Re,r.partial=Ln,r.partialRight=Gn,r.pick=Be,r.pluck=pi,r.property=nr,r.pull=kn,r.range=Mn,r.reject=an,r.remove=jn,r.rest=Sn,r.shuffle=sn,r.sortBy=ln,r.tap=lr,r.throttle=Wn,r.times=ur,r.toArray=fn,r.transform=Ue,r.union=On,r.uniq=An,r.values=Je,r.where=di,r.without=En,r.wrap=Yn,r.xor=Nn,r.zip=In,r.zipObject=Tn,r.collect=Ze,r.drop=Sn,r.each=Xe,r.eachRight=Ke,r.extend=ai,r.methods=_e,r.object=Tn,r.select=We,r.tail=Sn,r.unique=An,r.unzip=In,Zn(r),r.clone=pe,r.cloneDeep=de,r.contains=Le,r.escape=Kn,r.every=Ge,r.find=Ye,r.findIndex=dn,r.findKey=ve,r.findLast=Ve,r.findLastIndex=gn,r.findLastKey=me,r.has=we,r.identity=Qn,r.indexOf=yn,r.isArguments=he,r.isArray=Qr,r.isBoolean=ke,r.isDate=Me,r.isElement=je,r.isEmpty=Se,r.isEqual=Ce,r.isFinite=Oe,r.isFunction=Ae,r.isNaN=Ne,r.isNull=Ie,r.isNumber=Te,r.isObject=Ee,r.isPlainObject=ci,r.isRegExp=ze,r.isString=Fe,r.isUndefined=$e,r.lastIndexOf=xn,r.mixin=Zn,r.noConflict=tr,r.noop=er,r.now=gi,r.parseInt=vi,r.random=rr,r.reduce=nn,r.reduceRight=rn,r.result=ir,r.runInContext=p,r.size=on,r.some=cn,r.sortedIndex=Cn,r.template=ar,r.unescape=sr,r.uniqueId=or,r.all=Ge,r.any=cn,r.detect=Ye,r.findWhere=Ye,r.foldl=nn,r.foldr=rn,r.include=Le,r.inject=nn,Zn(function(){var t={};return oi(r,function(e,n){r.prototype[n]||(t[n]=e)}),t}(),!1),r.first=vn,r.last=wn,r.sample=un,r.take=vn,r.head=vn,oi(r,function(t,e){var n="sample"!==e;r.prototype[e]||(r.prototype[e]=function(e,r){var i=this.__chain__,a=t(this.__wrapped__,e,r);return i||null!=e&&(!r||n&&"function"==typeof e)?new g(a,i):a})}),r.VERSION="2.4.1",r.prototype.chain=fr,r.prototype.toString=hr,r.prototype.value=pr,r.prototype.valueOf=pr,Xe(["join","pop","shift"],function(t){var e=Mr[t];r.prototype[t]=function(){var t=this.__chain__,n=e.apply(this.__wrapped__,arguments);return t?new g(n,t):n}}),Xe(["push","reverse","sort","unshift"],function(t){var e=Mr[t];r.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),Xe(["concat","slice","splice"],function(t){var e=Mr[t];r.prototype[t]=function(){return new g(e.apply(this.__wrapped__,arguments),this.__chain__)}}),r}var d,g=[],v=[],m=0,y=+new Date+"",b=75,_=40,w=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",x=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,M=/(__e\(.*?\)|\b__t\)) \+\n'';/g,j=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,S=/\w*$/,C=/^\s*function[ \n\r\t]+\w/,O=/<%=([\s\S]+?)%>/g,A=RegExp("^["+w+"]*0+(?=.$)"),E=/($^)/,N=/\bthis\b/,I=/['\n\r\t\u2028\u2029\\]/g,T=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],z=0,F="[object Arguments]",$="[object Array]",H="[object Boolean]",D="[object Date]",P="[object Function]",R="[object Number]",B="[object Object]",U="[object RegExp]",J="[object String]",q={};q[P]=!1,q[F]=q[$]=q[H]=q[D]=q[R]=q[B]=q[U]=q[J]=!0;var L={leading:!1,maxWait:0,trailing:!1},G={configurable:!1,enumerable:!1,value:null,writable:!1},W={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},V=W[typeof window]&&window||this,X=W[typeof exports]&&exports&&!exports.nodeType&&exports,K=W[typeof module]&&module&&!module.nodeType&&module,Q=K&&K.exports===X&&X,Z=W[typeof global]&&global;!Z||Z.global!==Z&&Z.window!==Z||(V=Z);var te=p();"function"==typeof n&&"object"==typeof n.amd&&n.amd?(V._=te,n("lodash",[],function(){return te})):X&&K?Q?(K.exports=te)._=te:X._=te:V._=te}.call(this),function(){{var t,n=this,r=n.Backbone,i=[],a=(i.push,i.slice);i.splice}t="undefined"!=typeof exports?exports:n.Backbone={},t.VERSION="1.1.0";var u=n._;u||"undefined"==typeof e||(u=e("underscore")),t.$=n.jQuery||n.Zepto||n.ender||n.$,t.noConflict=function(){return n.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var s=t.Events={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var r=this,i=u.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,a,s,o,l,f,h;if(!this._events||!c(this,"off",t,[e,n]))return this;
if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:u.keys(this._events),o=0,l=s.length;l>o;o++)if(t=s[o],a=this._events[t]){if(this._events[t]=r=[],e||n)for(f=0,h=a.length;h>f;f++)i=a[f],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&l(n,e),r&&l(r,arguments),this},stopListening:function(t,e,n){var r=this._listeningTo;if(!r)return this;var i=!e&&!n;n||"object"!=typeof e||(n=this),t&&((r={})[t._listenId]=t);for(var a in r)t=r[a],t.off(e,n,this),(i||u.isEmpty(t._events))&&delete this._listeningTo[a];return this}},o=/\s+/,c=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(o.test(n)){for(var a=n.split(o),u=0,s=a.length;s>u;u++)t[e].apply(t,[a[u]].concat(r));return!1}return!0},l=function(t,e){var n,r=-1,i=t.length,a=e[0],u=e[1],s=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,a);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,a,u);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,a,u,s);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},f={listenTo:"on",listenToOnce:"once"};u.each(f,function(t,e){s[e]=function(e,n,r){var i=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=u.uniqueId("l"));return i[a]=e,r||"object"!=typeof n||(r=this),e[t](n,r,this),this}}),s.bind=s.on,s.unbind=s.off,u.extend(t,s);var h=t.Model=function(t,e){var n=t||{};e||(e={}),this.cid=u.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=u.defaults({},n,u.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};u.extend(h.prototype,s,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return u.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return u.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,i,a,s,o,c,l,f;if(null==t)return this;if("object"==typeof t?(i=t,n=e):(i={})[t]=e,n||(n={}),!this._validate(i,n))return!1;a=n.unset,o=n.silent,s=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=u.clone(this.attributes),this.changed={}),f=this.attributes,l=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)e=i[r],u.isEqual(f[r],e)||s.push(r),u.isEqual(l[r],e)?delete this.changed[r]:this.changed[r]=e,a?delete f[r]:f[r]=e;if(!o){s.length&&(this._pending=!0);for(var h=0,p=s.length;p>h;h++)this.trigger("change:"+s[h],this,f[s[h]],n)}if(c)return this;if(!o)for(;this._pending;)this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,u.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,u.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!u.isEmpty(this.changed):u.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?u.clone(this.changed):!1;var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in t)u.isEqual(r[i],e=t[i])||((n||(n={}))[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return u.clone(this._previousAttributes)},fetch:function(t){t=t?u.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(r){return e.set(e.parse(r,t),t)?(n&&n(e,r,t),e.trigger("sync",e,r,t),void 0):!1},H(this,t),this.sync("read",this,t)},save:function(t,e,n){var r,i,a,s=this.attributes;if(null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n=u.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=u.extend({},s,r)),void 0===n.parse&&(n.parse=!0);var o=this,c=n.success;return n.success=function(t){o.attributes=s;var e=o.parse(t,n);return n.wait&&(e=u.extend(r||{},e)),u.isObject(e)&&!o.set(e,n)?!1:(c&&c(o,t,n),o.trigger("sync",o,t,n),void 0)},H(this,n),i=this.isNew()?"create":n.patch?"patch":"update","patch"===i&&(n.attrs=r),a=this.sync(i,this,n),r&&n.wait&&(this.attributes=s),a},destroy:function(t){t=t?u.clone(t):{};var e=this,n=t.success,r=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&r(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;H(this,t);var i=this.sync("delete",this,t);return t.wait||r(),i},url:function(){var t=u.result(this,"urlRoot")||u.result(this.collection,"url")||$();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},u.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=u.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return n?(this.trigger("invalid",this,n,u.extend(e,{validationError:n})),!1):!0}});var p=["keys","values","pairs","invert","pick","omit"];u.each(p,function(t){h.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),u[t].apply(u,e)}});var d=t.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,u.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};u.extend(d.prototype,s,{model:h,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,e){return this.set(t,u.extend({merge:!1},e,v))},remove:function(t,e){var n=!u.isArray(t);t=n?[t]:u.clone(t),e||(e={});var r,i,a,s;for(r=0,i=t.length;i>r;r++)s=t[r]=this.get(t[r]),s&&(delete this._byId[s.id],delete this._byId[s.cid],a=this.indexOf(s),this.models.splice(a,1),this.length--,e.silent||(e.index=a,s.trigger("remove",s,this,e)),this._removeReference(s));return n?t[0]:t},set:function(t,e){e=u.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!u.isArray(t);t=n?t?[t]:[]:u.clone(t);var r,i,a,s,o,c,l,f=e.at,p=this.model,d=this.comparator&&null==f&&e.sort!==!1,v=u.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},_=e.add,w=e.merge,x=e.remove,k=!d&&_&&x?[]:!1;for(r=0,i=t.length;i>r;r++){if(o=t[r],a=o instanceof h?s=o:o[p.prototype.idAttribute],c=this.get(a))x&&(b[c.cid]=!0),w&&(o=o===s?s.attributes:o,e.parse&&(o=c.parse(o,e)),c.set(o,e),d&&!l&&c.hasChanged(v)&&(l=!0)),t[r]=c;else if(_){if(s=t[r]=this._prepareModel(o,e),!s)continue;m.push(s),s.on("all",this._onModelEvent,this),this._byId[s.cid]=s,null!=s.id&&(this._byId[s.id]=s)}k&&k.push(c||s)}if(x){for(r=0,i=this.length;i>r;++r)b[(s=this.models[r]).cid]||y.push(s);y.length&&this.remove(y,e)}if(m.length||k&&k.length)if(d&&(l=!0),this.length+=m.length,null!=f)for(r=0,i=m.length;i>r;r++)this.models.splice(f+r,0,m[r]);else{k&&(this.models.length=0);var M=k||m;for(r=0,i=M.length;i>r;r++)this.models.push(M[r])}if(l&&this.sort({silent:!0}),!e.silent){for(r=0,i=m.length;i>r;r++)(s=m[r]).trigger("add",s,this,e);(l||k&&k.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n]);return e.previousModels=this.models,this._reset(),t=this.add(t,u.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,u.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,u.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){return null==t?void 0:this._byId[t.id]||this._byId[t.cid]||this._byId[t]},at:function(t){return this.models[t]},where:function(t,e){return u.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),u.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(u.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return u.invoke(this.models,"get",t)},fetch:function(t){t=t?u.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(r){var i=t.reset?"reset":"set";n[i](r,t),e&&e(n,r,t),n.trigger("sync",n,r,t)},H(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?u.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,e,i){i.wait&&n.add(t,i),r&&r(t,e,i)},t.save(null,e),t},parse:function(t){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof h)return t.collection||(t.collection=this),t;e=e?u.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];u.each(m,function(t){d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),u[t].apply(u,e)}});var y=["groupBy","countBy","sortBy"];u.each(y,function(t){d.prototype[t]=function(e,n){var r=u.isFunction(e)?e:function(t){return t.get(e)};return u[t](this.models,r,n)}});var b=t.View=function(t){this.cid=u.uniqueId("view"),t||(t={}),u.extend(this,u.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];u.extend(b.prototype,s,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=u.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(u.isFunction(n)||(n=this[t[e]]),n){var r=e.match(_),i=r[1],a=r[2];n=u.bind(n,this),i+=".delegateEvents"+this.cid,""===a?this.$el.on(i,n):this.$el.on(i,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(u.result(this,"el"),!1);else{var e=u.extend({},u.result(this,"attributes"));this.id&&(e.id=u.result(this,"id")),this.className&&(e["class"]=u.result(this,"className"));var n=t.$("<"+u.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,r){var i=k[e];u.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:i,dataType:"json"};if(r.url||(a.url=u.result(n,"url")||$()),null!=r.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||n.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===i||"DELETE"===i||"PATCH"===i)){a.type="POST",r.emulateJSON&&(a.data._method=i);var s=r.beforeSend;r.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",i),s?s.apply(this,arguments):void 0}}"GET"===a.type||r.emulateJSON||(a.processData=!1),"PATCH"===a.type&&x&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var o=r.xhr=t.ajax(u.extend(a,r));return n.trigger("request",n,o,r),o};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),k={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var M=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},j=/\((.*?)\)/g,S=/(\(\?)?:\w+/g,C=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;u.extend(M.prototype,s,{initialize:function(){},route:function(e,n,r){u.isRegExp(e)||(e=this._routeToRegExp(e)),u.isFunction(n)&&(r=n,n=""),r||(r=this[n]);var i=this;return t.history.route(e,function(a){var u=i._extractParameters(e,a);r&&r.apply(i,u),i.trigger.apply(i,["route:"+n].concat(u)),i.trigger("route",n,u),t.history.trigger("route",i,n,u)}),this},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=u.result(this,"routes");for(var t,e=u.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(O,"\\$&").replace(j,"(?:$1)?").replace(S,function(t,e){return e?t:"([^/]+)"}).replace(C,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return u.map(n,function(t){return t?decodeURIComponent(t):null})}});var A=t.History=function(){this.handlers=[],u.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},E=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,I=/msie [\w.]+/,T=/\/$/,z=/[?#].*$/;A.started=!1,u.extend(A.prototype,s,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var n=this.root.replace(T,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace(E,"")},start:function(e){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=u.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),r=document.documentMode,i=I.exec(navigator.userAgent.toLowerCase())&&(!r||7>=r);this.root=("/"+this.root+"/").replace(N,"/"),i&&this._wantsHashChange&&(this.iframe=t.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(n)),this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location,s=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!s)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&s&&a.hash&&(this.fragment=this.getHash().replace(E,""),this.history.replaceState({},document.title,this.root+this.fragment+a.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t===this.fragment?!1:(this.iframe&&this.navigate(t),this.loadUrl(),void 0)},loadUrl:function(t){return t=this.fragment=this.getFragment(t),u.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(t,e){if(!A.started)return!1;e&&e!==!0||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(z,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),t.history=new A;var F=function(t,e){var n,r=this;n=t&&u.has(t,"constructor")?t.constructor:function(){return r.apply(this,arguments)},u.extend(n,r,e);var i=function(){this.constructor=n};return i.prototype=r.prototype,n.prototype=new i,t&&u.extend(n.prototype,t),n.__super__=r.prototype,n};h.extend=d.extend=M.extend=b.extend=A.extend=F;var $=function(){throw new Error('A "url" property or function must be specified')},H=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}}}.call(this),n("backbone",["lodash"],function(t){return function(){var e;return e||t.Backbone}}(this)),function(t,n){var r,i,a,u,s,o,c,l,f,h,p,d,g,v,m,y,b,_,w,x,k,M,j,S;r=function(t){return new r.prototype.init(t)},"undefined"!=typeof e&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=r:t.Globalize=r,r.cultures={},r.prototype={constructor:r,init:function(t){return this.cultures=r.cultures,this.cultureSelector=t,this}},r.prototype.init.prototype=r.prototype,r.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},r.cultures["default"].calendar=r.cultures["default"].calendars.standard,r.cultures.en=r.cultures["default"],r.cultureSelector="en",i=/^0x[a-f0-9]+$/i,a=/^[+\-]?infinity$/i,u=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,s=/^\s+|\s+$/g,o=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},c=function(t,e){return t.substr(t.length-e.length)===e},l=function(){var t,e,r,i,a,u,s=arguments[0]||{},o=1,c=arguments.length,d=!1;for("boolean"==typeof s&&(d=s,s=arguments[1]||{},o=2),"object"==typeof s||h(s)||(s={});c>o;o++)if(null!=(t=arguments[o]))for(e in t)r=s[e],i=t[e],s!==i&&(d&&i&&(p(i)||(a=f(i)))?(a?(a=!1,u=r&&f(r)?r:[]):u=r&&p(r)?r:{},s[e]=l(d,u,i)):i!==n&&(s[e]=i));return s},f=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},h=function(t){return"[object Function]"===Object.prototype.toString.call(t)},p=function(t){return"[object Object]"===Object.prototype.toString.call(t)},d=function(t,e){return 0===t.indexOf(e)},g=function(t){return(t+"").replace(s,"")},v=function(t){return isNaN(t)?0/0:Math[0>t?"ceil":"floor"](t)},m=function(t,e,n){var r;for(r=t.length;e>r;r+=1)t=n?"0"+t:t+"0";return t},y=function(t,e){for(var n=0,r=!1,i=0,a=t.length;a>i;i++){var u=t.charAt(i);switch(u){case"'":r?e.push("'"):n++,r=!1;break;case"\\":r&&e.push("\\"),r=!r;break;default:e.push(u),r=!1}}return n},b=function(t,e){e=e||"F";var n,r=t.patterns,i=e.length;if(1===i){if(n=r[e],!n)throw"Invalid date format string '"+e+"'.";e=n}else 2===i&&"%"===e.charAt(0)&&(e=e.charAt(1));return e},_=function(t,e,n){function r(t,e){var n,r=t+"";return e>1&&r.length<e?(n=m[e-2]+r,n.substr(n.length-e,e)):n=r}function i(){return d||g?d:(d=w.test(e),g=!0,d)}function a(t,e){if(v)return v[e];switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();default:throw"Invalid part value "+e}}var u,s=n.calendar,o=s.convert;if(!e||!e.length||"i"===e){if(n&&n.name.length)if(o)u=_(t,s.patterns.F,n);else{var c=new Date(t.getTime()),l=k(t,s.eras);c.setFullYear(M(t,s,l)),u=c.toLocaleString()}else u=t.toString();return u}var f=s.eras,h="s"===e;e=b(s,e),u=[];var p,d,g,v,m=["0","00","000"],w=/([^d]|^)(d|dd)([^d]|$)/g,j=0,S=x();for(!h&&o&&(v=o.fromGregorian(t));;){var C=S.lastIndex,O=S.exec(e),A=e.slice(C,O?O.index:e.length);if(j+=y(A,u),!O)break;if(j%2)u.push(O[0]);else{var E=O[0],N=E.length;switch(E){case"ddd":case"dddd":var I=3===N?s.days.namesAbbr:s.days.names;u.push(I[t.getDay()]);break;case"d":case"dd":d=!0,u.push(r(a(t,2),N));break;case"MMM":case"MMMM":var T=a(t,1);u.push(s.monthsGenitive&&i()?s.monthsGenitive[3===N?"namesAbbr":"names"][T]:s.months[3===N?"namesAbbr":"names"][T]);break;case"M":case"MM":u.push(r(a(t,1)+1,N));break;case"y":case"yy":case"yyyy":T=v?v[0]:M(t,s,k(t,f),h),4>N&&(T%=100),u.push(r(T,N));break;case"h":case"hh":p=t.getHours()%12,0===p&&(p=12),u.push(r(p,N));break;case"H":case"HH":u.push(r(t.getHours(),N));break;case"m":case"mm":u.push(r(t.getMinutes(),N));break;case"s":case"ss":u.push(r(t.getSeconds(),N));break;case"t":case"tt":T=t.getHours()<12?s.AM?s.AM[0]:" ":s.PM?s.PM[0]:" ",u.push(1===N?T.charAt(0):T);break;case"f":case"ff":case"fff":u.push(r(t.getMilliseconds(),3).substr(0,N));break;case"z":case"zz":p=t.getTimezoneOffset()/60,u.push((0>=p?"+":"-")+r(Math.floor(Math.abs(p)),N));break;case"zzz":p=t.getTimezoneOffset()/60,u.push((0>=p?"+":"-")+r(Math.floor(Math.abs(p)),2)+":"+r(Math.abs(t.getTimezoneOffset()%60),2));break;case"g":case"gg":s.eras&&u.push(s.eras[k(t,f)].name);break;case"/":u.push(s["/"]);break;default:throw"Invalid date format pattern '"+E+"'."}}}return u.join("")},function(){var t;t=function(t,e,n){var r=n.groupSizes,i=r[0],a=1,u=Math.pow(10,e),s=Math.round(t*u)/u;isFinite(s)||(s=t),t=s;var o=t+"",c="",l=o.split(/e/i),f=l.length>1?parseInt(l[1],10):0;o=l[0],l=o.split("."),o=l[0],c=l.length>1?l[1]:"";f>0?(c=m(c,f,!1),o+=c.slice(0,f),c=c.substr(f)):0>f&&(f=-f,o=m(o,f+1,!0),c=o.slice(-f,o.length)+c,o=o.slice(0,-f)),c=e>0?n["."]+(c.length>e?c.slice(0,e):m(c,e)):"";for(var h=o.length-1,p=n[","],d="";h>=0;){if(0===i||i>h)return o.slice(0,h+1)+(d.length?p+d+c:c);d=o.slice(h-i+1,h+1)+(d.length?p+d:""),h-=i,a<r.length&&(i=r[a],a++)}return o.slice(0,h+1)+p+d+c},w=function(e,n,r){if(!isFinite(e))return 1/0===e?r.numberFormat.positiveInfinity:e===-1/0?r.numberFormat.negativeInfinity:r.numberFormat.NaN;if(!n||"i"===n)return r.name.length?e.toLocaleString():e.toString();n=n||"D";var i,a=r.numberFormat,u=Math.abs(e),s=-1;n.length>1&&(s=parseInt(n.slice(1),10));var o,c=n.charAt(0).toUpperCase();switch(c){case"D":i="n",u=v(u),-1!==s&&(u=m(""+u,s,!0)),0>e&&(u="-"+u);break;case"N":o=a;case"C":o=o||a.currency;case"P":o=o||a.percent,i=0>e?o.pattern[0]:o.pattern[1]||"n",-1===s&&(s=o.decimals),u=t(u*("P"===c?100:1),s,o);break;default:throw"Bad number format specifier: "+c}for(var l=/n|\$|-|%/g,f="";;){var h=l.lastIndex,p=l.exec(i);if(f+=i.slice(h,p?p.index:i.length),!p)break;switch(p[0]){case"n":f+=u;break;case"$":f+=a.currency.symbol;break;case"-":/[1-9]/.test(u)&&(f+=a["-"]);break;case"%":f+=a.percent.symbol}}return f}}(),x=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},k=function(t,e){if(!e)return 0;for(var n,r=t.getTime(),i=0,a=e.length;a>i;i++)if(n=e[i].start,null===n||r>=n)return i;return 0},M=function(t,e,n,r){var i=t.getFullYear();return!r&&e.eras&&(i-=e.eras[n].offset),i},function(){var t,e,n,r,i,a,u;t=function(t,e){if(100>e){var n=new Date,r=k(n),i=M(n,t,r),a=t.twoDigitYearMax;a="string"==typeof a?(new Date).getFullYear()%100+parseInt(a,10):a,e+=i-i%100,e>a&&(e-=100)}return e},e=function(t,e,n){var r,i=t.days,s=t._upperDays;return s||(t._upperDays=s=[u(i.names),u(i.namesAbbr),u(i.namesShort)]),e=a(e),n?(r=o(s[1],e),-1===r&&(r=o(s[2],e))):r=o(s[0],e),r},n=function(t,e,n){var r=t.months,i=t.monthsGenitive||t.months,s=t._upperMonths,c=t._upperMonthsGen;s||(t._upperMonths=s=[u(r.names),u(r.namesAbbr)],t._upperMonthsGen=c=[u(i.names),u(i.namesAbbr)]),e=a(e);var l=o(n?s[1]:s[0],e);return 0>l&&(l=o(n?c[1]:c[0],e)),l},r=function(t,e){var n=t._parseRegExp;if(n){var r=n[e];if(r)return r}else t._parseRegExp=n={};for(var i,a=b(t,e).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),u=["^"],s=[],o=0,c=0,l=x();null!==(i=l.exec(a));){var f=a.slice(o,i.index);if(o=l.lastIndex,c+=y(f,u),c%2)u.push(i[0]);else{var h,p=i[0],d=p.length;switch(p){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":h="(\\D+)";break;case"tt":case"t":h="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":h="(\\d{"+d+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":h="(\\d\\d?)";break;case"zzz":h="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":h="([+-]?\\d\\d?)";break;case"/":h="(\\/)";break;default:throw"Invalid date format pattern '"+p+"'."}h&&u.push(h),s.push(i[0])}}y(a.slice(o),u),u.push("$");var g=u.join("").replace(/\s+/g,"\\s+"),v={regExp:g,groups:s};return n[e]=v},i=function(t,e,n){return e>t||t>n},a=function(t){return t.split(" ").join(" ").toUpperCase()},u=function(t){for(var e=[],n=0,r=t.length;r>n;n++)e[n]=a(t[n]);return e},j=function(a,u,s){a=g(a);var o=s.calendar,c=r(o,u),l=new RegExp(c.regExp).exec(a);if(null===l)return null;for(var f,h=c.groups,p=null,v=null,m=null,y=null,b=null,_=0,w=0,x=0,k=0,M=null,j=!1,S=0,C=h.length;C>S;S++){var O=l[S+1];if(O){var A=h[S],E=A.length,N=parseInt(O,10);switch(A){case"dd":case"d":if(y=N,i(y,1,31))return null;break;case"MMM":case"MMMM":if(m=n(o,O,3===E),i(m,0,11))return null;break;case"M":case"MM":if(m=N-1,i(m,0,11))return null;break;case"y":case"yy":case"yyyy":if(v=4>E?t(o,N):N,i(v,0,9999))return null;break;case"h":case"hh":if(_=N,12===_&&(_=0),i(_,0,11))return null;break;case"H":case"HH":if(_=N,i(_,0,23))return null;break;case"m":case"mm":if(w=N,i(w,0,59))return null;break;case"s":case"ss":if(x=N,i(x,0,59))return null;break;case"tt":case"t":if(j=o.PM&&(O===o.PM[0]||O===o.PM[1]||O===o.PM[2]),!j&&(!o.AM||O!==o.AM[0]&&O!==o.AM[1]&&O!==o.AM[2]))return null;break;case"f":case"ff":case"fff":if(k=N*Math.pow(10,3-E),i(k,0,999))return null;break;case"ddd":case"dddd":if(b=e(o,O,3===E),i(b,0,6))return null;break;case"zzz":var I=O.split(/:/);if(2!==I.length)return null;if(f=parseInt(I[0],10),i(f,-12,13))return null;var T=parseInt(I[1],10);if(i(T,0,59))return null;M=60*f+(d(O,"-")?-T:T);break;case"z":case"zz":if(f=N,i(f,-12,13))return null;M=60*f;break;case"g":case"gg":var z=O;if(!z||!o.eras)return null;z=g(z.toLowerCase());for(var F=0,$=o.eras.length;$>F;F++)if(z===o.eras[F].name.toLowerCase()){p=F;break}if(null===p)return null}}}var H,D=new Date,P=o.convert;if(H=P?P.fromGregorian(D)[0]:D.getFullYear(),null===v?v=H:o.eras&&(v+=o.eras[p||0].offset),null===m&&(m=0),null===y&&(y=1),P){if(D=P.toGregorian(v,m,y),null===D)return null}else{if(D.setFullYear(v,m,y),D.getDate()!==y)return null;if(null!==b&&D.getDay()!==b)return null}if(j&&12>_&&(_+=12),D.setHours(_,w,x,k),null!==M){var R=D.getMinutes()-(M+D.getTimezoneOffset());D.setHours(D.getHours()+parseInt(R/60,10),R%60)}return D}}(),S=function(t,e,n){var r,i=e["-"],a=e["+"];switch(n){case"n -":i=" "+i,a=" "+a;case"n-":c(t,i)?r=["-",t.substr(0,t.length-i.length)]:c(t,a)&&(r=["+",t.substr(0,t.length-a.length)]);break;case"- n":i+=" ",a+=" ";case"-n":d(t,i)?r=["-",t.substr(i.length)]:d(t,a)&&(r=["+",t.substr(a.length)]);break;case"(n)":d(t,"(")&&c(t,")")&&(r=["-",t.substr(1,t.length-2)])}return r||["",t]},r.prototype.findClosestCulture=function(t){return r.findClosestCulture.call(this,t)},r.prototype.format=function(t,e,n){return r.format.call(this,t,e,n)},r.prototype.localize=function(t,e){return r.localize.call(this,t,e)},r.prototype.parseInt=function(t,e,n){return r.parseInt.call(this,t,e,n)},r.prototype.parseFloat=function(t,e,n){return r.parseFloat.call(this,t,e,n)},r.prototype.culture=function(t){return r.culture.call(this,t)},r.addCultureInfo=function(t,e,n){var r={},i=!1;"string"!=typeof t?(n=t,t=this.culture().name,r=this.cultures[t]):"string"!=typeof e?(n=e,i=null==this.cultures[t],r=this.cultures[t]||this.cultures["default"]):(i=!0,r=this.cultures[e]),this.cultures[t]=l(!0,{},r,n),i&&(this.cultures[t].calendar=this.cultures[t].calendars.standard)},r.findClosestCulture=function(t){var e;if(!t)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];if("string"==typeof t&&(t=t.split(",")),f(t)){var n,r,i=this.cultures,a=t,u=a.length,s=[];for(r=0;u>r;r++){t=g(a[r]);var o,c=t.split(";");n=g(c[0]),1===c.length?o=1:(t=g(c[1]),0===t.indexOf("q=")?(t=t.substr(2),o=parseFloat(t),o=isNaN(o)?0:o):o=1),s.push({lang:n,pri:o})}for(s.sort(function(t,e){return t.pri<e.pri?1:t.pri>e.pri?-1:0}),r=0;u>r;r++)if(n=s[r].lang,e=i[n])return e;for(r=0;u>r;r++)for(n=s[r].lang;;){var l=n.lastIndexOf("-");if(-1===l)break;if(n=n.substr(0,l),e=i[n])return e}for(r=0;u>r;r++){n=s[r].lang;for(var h in i){var p=i[h];if(p.language==n)return p}}}else if("object"==typeof t)return t;return e||null},r.format=function(t,e,n){var r=this.findClosestCulture(n);return t instanceof Date?t=_(t,e,r):"number"==typeof t&&(t=w(t,e,r)),t},r.localize=function(t,e){return this.findClosestCulture(e).messages[t]||this.cultures["default"].messages[t]},r.parseDate=function(t,e,n){n=this.findClosestCulture(n);var r,i,a;if(e){if("string"==typeof e&&(e=[e]),e.length)for(var u=0,s=e.length;s>u;u++){var o=e[u];if(o&&(r=j(t,o,n)))break}}else{a=n.calendar.patterns;for(i in a)if(r=j(t,a[i],n))break}return r||null},r.parseInt=function(t,e,n){return v(r.parseFloat(t,e,n))},r.parseFloat=function(t,e,n){"number"!=typeof e&&(n=e,e=10);var r=this.findClosestCulture(n),s=0/0,o=r.numberFormat;if(t.indexOf(r.numberFormat.currency.symbol)>-1&&(t=t.replace(r.numberFormat.currency.symbol,""),t=t.replace(r.numberFormat.currency["."],r.numberFormat["."])),t.indexOf(r.numberFormat.percent.symbol)>-1&&(t=t.replace(r.numberFormat.percent.symbol,"")),t=t.replace(/ /g,""),a.test(t))s=parseFloat(t);else if(!e&&i.test(t))s=parseInt(t,16);else{var c=S(t,o,o.pattern[0]),l=c[0],f=c[1];""===l&&"(n)"!==o.pattern[0]&&(c=S(t,o,"(n)"),l=c[0],f=c[1]),""===l&&"-n"!==o.pattern[0]&&(c=S(t,o,"-n"),l=c[0],f=c[1]),l=l||"+";var h,p,d=f.indexOf("e");0>d&&(d=f.indexOf("E")),0>d?(p=f,h=null):(p=f.substr(0,d),h=f.substr(d+1));var g,v,m=o["."],y=p.indexOf(m);0>y?(g=p,v=null):(g=p.substr(0,y),v=p.substr(y+m.length));
var b=o[","];g=g.split(b).join("");var _=b.replace(/\u00A0/g," ");b!==_&&(g=g.split(_).join(""));var w=l+g;if(null!==v&&(w+="."+v),null!==h){var x=S(h,o,"-n");w+="e"+(x[0]||"+")+x[1]}u.test(w)&&(s=parseFloat(w))}return s},r.culture=function(t){return"undefined"!=typeof t&&(this.cultureSelector=t),this.findClosestCulture(t)||this.cultures["default"]}}(this),n("globalize",function(){}),function(t){var n="object"==typeof module&&"object"==typeof exports,r=n?{_:e("underscore"),Backbone:e("backbone"),Globalize:e("globalize")}:window;(n?exports:Backbone).Schema=t(r,n)}(function(t){var e,n=t._,r=t.Backbone,i=t.Globalize,a=r.Schema=function(t){return this instanceof a?(e=n.extend(this,{model:t},{attributes:{}}),n.extend(t,{toJSON:n.wrap(t.toJSON,function(t,e){var i=t.call(this,e);return n.each(i,function(t,i,a){t instanceof r.Model?t=t.source?t.id:t.toJSON(e):t instanceof r.Collection&&(t=t.source?n.pluck(t.models,"id"):t.toJSON(e)),a[i]=t}),i}),get:n.wrap(t.get,function(t,n){var r=e.attributes[n],i=r&&r.getter,a=t.call(this,n);return i?i(n,a):a}),set:n.wrap(t.set,function(t,r,i,a){var u;!r||n.isObject(r)?(u=r,a=i):(u={})[r]=i;var s={};return n.each(u,function(t,r,i){var a=e.attributes[r],u=a&&a.setter,o=u?u(r,t):n.pick(i,r);n.each(o,function(t,e){s[e]=t})}),t.call(this,s,a),this})}),void 0):new a(t)};return n.extend(a,{extend:r.Model.extend},{handlers:{string:{getter:function(t,e){return e},setter:function(t,e){return n.isString(e)?e:String(e)}},"boolean":{getter:function(t,e){return e},setter:function(t,e){return n.isBoolean(e)?e:Boolean(e)}},number:{getter:function(t,e,n){var r=n.culture,a=n.format;return a?i.format(e,a,r):e},setter:function(t,e,r){var a=r.culture,u=Number(e);return isNaN(u)&&(u=n.isString(e)?e:String(e)),n.isNumber(u)?u:i.parseFloat(u,a)||"NaN"}},datetime:{getter:function(t,e,r){var a=r.culture,u=r.format;return n.isDate(e)||(e=new Date(e)),u?i.format(e,u,a):e},setter:function(t,e,r){var a=r.culture,u=r.format,s=r.standard;n.isDate(e)||(e=i.parseDate(e,u,a)||new Date(e));var o;switch(s){case"iso":o=e.toJSON()?e.toISOString():e.toString();break;case"unix":o=e.getTime();break;default:o=e}return o}},locale:{getter:function(t,e,n){var r=n.culture;return i.localize(e,r)||e},setter:function(t,e,r){var a,u=r.culture,s=i.findClosestCulture(u).messages;return n.find(s,function(t,n){return t===e?a=n:!1}),a||String(e)}},model:{getter:function(t,e){return e},setter:function(t,e,r){r=n.clone(r);var i,a=r.source,u=r.clear;i=r.model||a.model;var s,o=this.model.get(t);return s=e instanceof i?e===o?e:n.clone(e.attributes):a?a.get(e):e,s instanceof i?o=s:o instanceof i?u?o.clear().set(s,r):o.set(s,r):o=new i(s,r),o.source=a||null,o}},collection:{getter:function(t,e){return e},setter:function(t,e,r){r=n.clone(r);var i,a=r.source,u=r.reset;i=r.collection||a.constructor;var s,o=this.model.get(t);return s=e instanceof i?e===o?e:n.clone(e.models):a?a.filter(function(t){return n.contains(e,t.id)}):e,s instanceof i?o=s:o instanceof i?u?o.reset(s,r):o.set(s,r):o=new i(s,r),o.source=a||null,o}}}}),n.extend(a.prototype,{constructor:a},{define:function(t,e){var r;return!t||n.isObject(t)?r=t:(r={})[t]=e,n.each(r,function(t,e){t=t||{},this._addAttribute(e,t)},this),this.refresh(),this},refresh:function(){var t=this.attributes,e={};return n.each(t,function(t,n){e[n]=this.model.attributes[n]},this),this.model.set(e),this},defaultValue:function(t){var e=n.result(this.model,"defaults");return e&&n.has(e,t)?e[t]:null},_addAttribute:function(t,r){var i=r.type,a=r.array,u=r.model,s=r.collection;i||(a?i=a:u?i="model":s&&(i="collection"));var o=this.constructor,c=o.handlers[i],l=c&&c.getter,f=c&&c.setter;return this.attributes[t]=n.defaults(r,{getter:n.wrap(l,function(t,e,i){var u=[],s=a?i:[i];return n.each(s,function(i){var a;a=n.isNull(i)?i:t?t.call(this,e,i,r):i,u.push(a)},this),a?u:u[0]}),setter:n.wrap(f,function(t,u,s){var o=[],c=a?s:[s];return n.each(c,function(a){n.isUndefined(a)&&(a=e.defaultValue(u));var s;if(n.isNull(a))switch(i){case"model":s=t?t.call(this,u,{},r):a;break;case"collection":s=t?t.call(this,u,[],r):a;break;default:s=a}else s=t?t.call(this,u,a,r):a;o.push(s)},this),n.object([u],[a?o:o[0]])})}),this._bindHandlers(r),this},_bindHandlers:function(t){var e=t.getter,r=t.setter;return e&&(t.getter=n.bind(e,this)),r&&(t.setter=n.bind(r,this)),this}}),a}),n("schema",["backbone","globalize"],function(t){return function(){var e;return e||t.Backbone.Schema}}(this)),e(["backbone","schema"],function(t){console.log(t),console.log(_)}),n("src/js/app/main",function(){}),e(["src/js/app/main"])}();