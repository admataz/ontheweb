!function(){var requirejs,require,define;!function(e){function t(e,t){return y.call(e,t)}function r(e,t){var r,n,s,i,o,a,l,u,c,p,f,d=t&&t.split("/"),h=m.map,g=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(d=d.slice(0,d.length-1),e=e.split("/"),o=e.length-1,m.nodeIdCompat&&q.test(e[o])&&(e[o]=e[o].replace(q,"")),e=d.concat(e),c=0;c<e.length;c+=1)if(f=e[c],"."===f)e.splice(c,1),c-=1;else if(".."===f){if(1===c&&(".."===e[2]||".."===e[0]))break;c>0&&(e.splice(c-1,2),c-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((d||g)&&h){for(r=e.split("/"),c=r.length;c>0;c-=1){if(n=r.slice(0,c).join("/"),d)for(p=d.length;p>0;p-=1)if(s=h[d.slice(0,p).join("/")],s&&(s=s[n])){i=s,a=c;break}if(i)break;!l&&g&&g[n]&&(l=g[n],u=c)}!i&&l&&(i=l,a=u),i&&(r.splice(0,a,i),e=r.join("/"))}return e}function n(t,r){return function(){return c.apply(e,w.call(arguments,0).concat([t,r]))}}function s(e){return function(t){return r(t,e)}}function i(e){return function(t){d[e]=t}}function o(r){if(t(h,r)){var n=h[r];delete h[r],g[r]=!0,u.apply(e,n)}if(!t(d,r)&&!t(g,r))throw new Error("No "+r);return d[r]}function a(e){var t,r=e?e.indexOf("!"):-1;return r>-1&&(t=e.substring(0,r),e=e.substring(r+1,e.length)),[t,e]}function l(e){return function(){return m&&m.config&&m.config[e]||{}}}var u,c,p,f,d={},h={},m={},g={},y=Object.prototype.hasOwnProperty,w=[].slice,q=/\.js$/;p=function(e,t){var n,i=a(e),l=i[0];return e=i[1],l&&(l=r(l,t),n=o(l)),l?e=n&&n.normalize?n.normalize(e,s(t)):r(e,t):(e=r(e,t),i=a(e),l=i[0],e=i[1],l&&(n=o(l))),{f:l?l+"!"+e:e,n:e,pr:l,p:n}},f={require:function(e){return n(e)},exports:function(e){var t=d[e];return"undefined"!=typeof t?t:d[e]={}},module:function(e){return{id:e,uri:"",exports:d[e],config:l(e)}}},u=function(r,s,a,l){var u,c,m,y,w,q,b=[],x=typeof a;if(l=l||r,"undefined"===x||"function"===x){for(s=!s.length&&a.length?["require","exports","module"]:s,w=0;w<s.length;w+=1)if(y=p(s[w],l),c=y.f,"require"===c)b[w]=f.require(r);else if("exports"===c)b[w]=f.exports(r),q=!0;else if("module"===c)u=b[w]=f.module(r);else if(t(d,c)||t(h,c)||t(g,c))b[w]=o(c);else{if(!y.p)throw new Error(r+" missing "+c);y.p.load(y.n,n(l,!0),i(c),{}),b[w]=d[c]}m=a?a.apply(d[r],b):void 0,r&&(u&&u.exports!==e&&u.exports!==d[r]?d[r]=u.exports:m===e&&q||(d[r]=m))}else r&&(d[r]=a)},requirejs=require=c=function(t,r,n,s,i){if("string"==typeof t)return f[t]?f[t](r):o(p(t,r).f);if(!t.splice){if(m=t,m.deps&&c(m.deps,m.callback),!r)return;r.splice?(t=r,r=n,n=null):t=e}return r=r||function(){},"function"==typeof n&&(n=s,s=i),s?u(e,t,r,n):setTimeout(function(){u(e,t,r,n)},4),c},c.config=function(e){return c(e)},requirejs._defined=d,define=function(e,r,n){r.splice||(n=r,r=[]),t(d,e)||t(h,e)||(h[e]=[e,r,n])},define.amd={jQuery:!0}}(),define("lib/almond/almond",function(){}),!function(e,t,r){"undefined"!=typeof module&&module.exports?module.exports=r():"function"==typeof define&&define.amd?define("lib/reqwest/reqwest",r):t[e]=r()}("reqwest",this,function(){function handleReadyState(e,t,r){return function(){return e._aborted?r(e.request):(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,twoHundo.test(e.request.status)?t(e.request):r(e.request)),void 0)}}function setHeaders(e,t){var r,n=t.headers||{};n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"],t.crossOrigin||n[requestedWith]||(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||(n[contentType]=t.contentType||defaultHeaders.contentType);for(r in n)n.hasOwnProperty(r)&&"setRequestHeader"in e&&e.setRequestHeader(r,n[r])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,r,n){var s=uniqid++,i=e.jsonpCallback||"callback",o=e.jsonpCallbackName||reqwest.getcallbackPrefix(s),a=new RegExp("((^|\\?|&)"+i+")=([^&]+)"),l=n.match(a),u=doc.createElement("script"),c=0,p=-1!==navigator.userAgent.indexOf("MSIE 10.0");return l?"?"===l[3]?n=n.replace(a,"$1="+o):o=l[3]:n=urlappend(n,i+"="+o),win[o]=generalCallback,u.type="text/javascript",u.src=n,u.async=!0,"undefined"==typeof u.onreadystatechange||p||(u.event="onclick",u.htmlFor=u.id="_reqwest_"+s),u.onload=u.onreadystatechange=function(){return u[readyState]&&"complete"!==u[readyState]&&"loaded"!==u[readyState]||c?!1:(u.onload=u.onreadystatechange=null,u.onclick&&u.onclick(),t(lastValue),lastValue=void 0,head.removeChild(u),c=1,void 0)},head.appendChild(u),{abort:function(){u.onload=u.onreadystatechange=null,r({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(u),c=1}}}function getRequest(e,t){var r,n=this.o,s=(n.method||"GET").toUpperCase(),i="string"==typeof n?n:n.url,o=n.processData!==!1&&n.data&&"string"!=typeof n.data?reqwest.toQueryString(n.data):n.data||null,a=!1;return"jsonp"!=n.type&&"GET"!=s||!o||(i=urlappend(i,o),o=null),"jsonp"==n.type?handleJsonp(n,e,t,i):(r=xhr(n),r.open(s,i,n.async===!1?!1:!0),setHeaders(r,n),setCredentials(r,n),win[xDomainRequest]&&r instanceof win[xDomainRequest]?(r.onload=e,r.onerror=t,r.onprogress=function(){},a=!0):r.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(r),a?setTimeout(function(){r.send(o)},200):r.send(o),r)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){var t=e.match(/\.(json|jsonp|html|xml)(\?|$)/);return t?t[1]:"js"}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function error(e,t,r){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=r,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,r);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this,type=o.type||setType(this.url);fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){self.abort()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var r,n,s,i,o=e.name,a=e.tagName.toLowerCase(),l=function(e){e&&!e.disabled&&t(o,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&o)switch(a){case"input":/reset|button|image|file/i.test(e.type)||(r=/checkbox/i.test(e.type),n=/radio/i.test(e.type),s=e.value,(!(r||n)||e.checked)&&t(o,normalize(r&&""===s?"on":s)));break;case"textarea":t(o,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())l(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(i=0;e.length&&i<e.length;i++)e.options[i].selected&&l(e.options[i])}}function eachFormElement(){var e,t,r=this,n=function(e,t){var n,s,i;for(n=0;n<t.length;n++)for(i=e[byTag](t[n]),s=0;s<i.length;s++)serial(i[s],r)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,r),n(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,r){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(r)):e[t]=r},arguments),e}function buildParams(e,t,r,n){var s,i,o,a=/\[\]$/;if(isArray(t))for(i=0;t&&i<t.length;i++)o=t[i],r||a.test(e)?n(e,o):buildParams(e+"["+("object"==typeof o?i:"")+"]",o,r,n);else if(t&&"[object Object]"===t.toString())for(s in t)buildParams(e+"["+s+"]",t[s],r,n);else n(e,t)}var win=window,doc=document,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,r){e.push({name:t,value:r})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,r=Array.prototype.slice.call(arguments,0);return e=r.pop(),e&&e.nodeType&&r.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,r)},reqwest.toQueryString=function(e,t){var r,n,s=t||!1,i=[],o=encodeURIComponent,a=function(e,t){t="function"==typeof t?t():null==t?"":t,i[i.length]=o(e)+"="+o(t)};if(isArray(e))for(n=0;e&&n<e.length;n++)a(e[n].name,e[n].value);else for(r in e)e.hasOwnProperty(r)&&buildParams(r,e[r],s,a);return i.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest}),define("client_apps/bookmarklet/main",["lib/reqwest/reqwest"],function(e){var t=document.title,r=window.location,n="",s={};window.getSelection?n=window.getSelection():document.getSelection?n=document.getSelection():document.selection&&(n=document.selection.createRange().text),s.url=r.toString(),s.title=t.toString(),s.content=n.toString(),e({url:"http://ontheweb.jit.su/webitem",method:"post",type:"json",processData:!1,crossOrigin:!0,data:JSON.stringify(s),contentType:"application/json",success:function(e){console.log(e)}})}),require(["client_apps/bookmarklet/main"])}();